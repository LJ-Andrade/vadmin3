<div class="image-previewer-container">
  <div class="image-wrapper">
    <img [src]="displayedImage" [attr.key]="imageVersion" alt="preview" class="preview-img" 
         (click)="showFullImage()" title="Click para ver en pantalla completa" />
    
    <!-- Indicador de preview -->
    <div class="preview-indicator" title="Click para ver en pantalla completa" (click)="showFullImage()">
      <i class="pi pi-eye"></i>
    </div>

    <div class="image-actions">
      <button *ngIf="allowDelete" pButton icon="pi pi-trash" class="p-button-danger p-button-sm"
              (click)="askImageDeletion()" title="Eliminar imagen"></button>
    </div>
  </div>

  <!-- Diálogo de Confirmación de Eliminación -->
  <p-dialog [(visible)]="confirmingDelete" modal header="¿Eliminar imagen?" [closable]="false" [style]="{width: '300px'}">
    <p>¿Estás seguro de que querés eliminar esta imagen?</p>
    <ng-template pTemplate="footer">
      <button pButton label="Cancelar" (click)="cancelImageDeletion()" class="p-button-text"></button>
      <button pButton label="Eliminar" (click)="requestImageDeletion()" class="p-button-danger"></button>
    </ng-template>
  </p-dialog>

  <!-- Preview de imagen en pantalla completa -->
  <p-dialog [(visible)]="fullImage" modal [style]="{width: '90vw', height: '90vh'}" [maximizable]="true" [closable]="true" (onHide)="hideFullImage()">
    <div class="full-image-container">
      <img [src]="displayedImage" alt="preview completo" class="full-preview-img" />
    </div>
  </p-dialog>
</div>
